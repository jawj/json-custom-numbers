var n,r,x={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},v,h,S,C=/[\n\t\u0000-\u001f]/,g=/(-)?(0|[1-9][0-9]*)([.][0-9]+)?([eE][-+]?[0-9]+)?/y;function l(t){throw{name:"SyntaxError",message:t,at:n,text:v}}function e(t){return t&&t!==r&&l("Expected '"+t+"' instead of '"+r+"'"),r=v.charAt(n),n+=1,r}function m(){g.lastIndex=n-1;var t=g.test(v);t||l("Bad number");var{lastIndex:a}=g,i=v.slice(n-1,a),u=h?h(i):+i;return n=a,e(),u}function j(){var t,a,i="",u;if(r==='"')r:for(;e();){if(r==='"')return e(),i;if(r==="\\")if(e(),r==="u"){for(u=0,a=0;a<4;a+=1){if(t=parseInt(e(),16),!isFinite(t))break r;u=u*16+t}i+=String.fromCharCode(u)}else if(typeof x[r]=="string")i+=x[r];else break;else{var o=v.indexOf('"',n);if(o===-1)break;var c=v.slice(n-1,o),d=c.indexOf("\\");if(d===-1?n=o:(c=c.slice(0,d),n+=d-1),!S&&C.test(c))break;i+=c}}l("Bad string")}function f(){for(;r===" "||r===`
`||r==="\r"||r==="	";)e()}function O(){switch(r){case"t":return e("t"),e("r"),e("u"),e("e"),!0;case"f":return e("f"),e("a"),e("l"),e("s"),e("e"),!1;case"n":return e("n"),e("u"),e("l"),e("l"),null}l("Unexpected '"+r+"'")}function E(){var t=[];if(r==="["){if(e("["),f(),r==="]")return e("]"),t;for(;r;){if(t.push(w()),f(),r==="]")return e("]"),t;e(","),f()}}l("Bad array")}function I(){var t,a={};if(r==="{"){if(e("{"),f(),r==="}")return e("}"),a;for(;r;){if(t=j(),f(),e(":"),a[t]=w(),f(),r==="}")return e("}"),a;e(","),f()}}l("Bad object")}function w(){switch(f(),r){case"{":return I();case"[":return E();case'"':return j();case"-":return m();default:return r>="0"&&r<="9"?m():O()}}function k(t,a,i,u){var o;return typeof t!="string"&&l("JSON source is not a string"),h=i,S=u,v=t,n=0,r=" ",o=w(),f(),r&&l("Syntax error"),typeof a=="function"?function c(d,y){var p,b,s=d[y];if(s&&typeof s=="object")for(p in s)Object.prototype.hasOwnProperty.call(s,p)&&(b=c(s,p),b!==void 0?s[p]=b:delete s[p]);return a.call(d,y,s)}({"":o},""):o}export{k as parse};
