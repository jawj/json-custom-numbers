var g=class extends Error{},e,t,n,p,A,v="Invalid character in string",j={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},y=/[\n\t\u0000-\u001f]/,w=/true|false|null|-?(0|[1-9][0-9]*)([.][0-9]+)?([eE][-+]?[0-9]+)?/y;function c(r){throw new g(`${r}
At character ${e} in JSON: ${n}`)}function k(){let r;w.lastIndex=e-1,w.test(n)||c("Unexpected value");let{lastIndex:a}=w;if(t<"f"){let l=n.slice(e-1,a);r=A?A(l):+l}else r=t==="t"?!0:t==="f"?!1:null;return e=a,t=n.charAt(e++),r}function I(){let r="";for(;;){let i=n.indexOf('"',e);if(i===-1&&c("Unterminated string"),i===e)return e=i+1,t=n.charAt(e++),r;let a=n.slice(e,i),l=a.indexOf("\\");if(l===-1)return!p&&y.test(a)&&c(v),r+=a,e=i+1,t=n.charAt(e++),r;{a=a.slice(0,l),!p&&y.test(a)&&c(v),r+=a,e+=l+1,t=n.charAt(e++);let o=j[t];if(o)r+=o;else if(t==="u"){let f=0;for(let h=0;h<4;h++){let u=parseInt(t=n.charAt(e++),16);isNaN(u)&&c("Invalid \\uXXXX escape in string"),f=f<<4|u}r+=String.fromCharCode(f)}else c("Invalid escape in string: '\\"+t+"'")}}}function m(){let r=[],i=0;do t=n.charAt(e++);while(t<"!"&&(t===" "||t===`
`||t==="\r"||t==="	"));if(t==="]")return t=n.charAt(e++),r;for(;t;){for(r[i++]=x();t<"!"&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);if(t==="]")return t=n.charAt(e++),r;t!==","&&c("Expected ',', got '"+t+"' between array elements");do t=n.charAt(e++);while(t<"!"&&(t===" "||t===`
`||t==="\r"||t==="	"))}c("Invalid array")}function C(){let r={};do t=n.charAt(e++);while(t<"!"&&(t===" "||t===`
`||t==="\r"||t==="	"));if(t==="}")return t=n.charAt(e++),r;for(;t==='"';){let i=I();for(;t<"!"&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);for(t!==":"&&c("Expected ':', got '"+t+"' between key and value in object"),t=n.charAt(e++),r[i]=x();t<"!"&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);if(t==="}")return t=n.charAt(e++),r;t!==","&&c("Expected ',', got '"+t+"' between items in object");do t=n.charAt(e++);while(t<"!"&&(t===" "||t===`
`||t==="\r"||t==="	"))}c("Invalid object")}function x(){for(;t<"!"&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);switch(t){case'"':return I();case"{":return C();case"[":return m();default:return k()}}function E(r,i,a,l){typeof r!="string"&&c("JSON source is not a string"),e=0,t=" ",n=r,p=l,A=a;let o=x();for(;t<"!"&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);return t&&c("Unexpected data at end"),typeof i=="function"?function f(h,u){let s=h[u];if(s&&typeof s=="object"){for(let d in s)if(Object.prototype.hasOwnProperty.call(s,d)){let b=f(s,d);b!==void 0?s[d]=b:delete s[d]}}return i.call(h,u,s)}({"":o},""):o}export{g as JSONParseError,E as parse};
