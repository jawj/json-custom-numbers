var e=0,t=" ",n="",A=!1,p,k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},y=/[\n\t\u0000-\u001f]/,w=/true|false|null|-?(0|[1-9][0-9]*)([.][0-9]+)?([eE][-+]?[0-9]+)?/y,g=class extends Error{};function a(r){throw new g(`${r}
At character ${e} in JSON: ${n}`)}function m(){let r;w.lastIndex=e-1,w.test(n)||a("Unexpected value");let{lastIndex:i}=w;if(t<"f"){let s=n.slice(e-1,i);r=p?p(s):+s}else r=t==="t"?!0:t==="f"?!1:null;return t=n.charAt(i),e=i+1,r}function j(){let r="";for(;;){let c=n.indexOf('"',e);if(c===-1&&a("Unterminated string"),c===e)return e=c+1,t=n.charAt(e++),r;let i=n.slice(e,c),s=i.indexOf("\\");if(s===-1)return!A&&y.test(i)&&a("Bad character in string"),r+=i,e=c+1,t=n.charAt(e++),r;{i=i.slice(0,s),!A&&y.test(i)&&a("Bad character in string"),r+=i,e+=s+1,t=n.charAt(e++);let o=k[t];if(o)r+=o;else if(t==="u"){let f=0;for(let h=0;h<4;h+=1){let u=parseInt(t=n.charAt(e++),16);isFinite(u)||a("Bad unicode escape in string"),f=f*16+u}r+=String.fromCharCode(f)}else a("Bad escape sequence in string: '\\"+t+"'")}}}function v(){let r=[],c=0;do t=n.charAt(e++);while(t<=" "&&(t===" "||t===`
`||t==="\r"||t==="	"));if(t==="]")return t=n.charAt(e++),r;for(;t;){for(r[c++]=x();t<=" "&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);if(t==="]")return t=n.charAt(e++),r;t!==","&&a("Expected ',', got '"+t+"' between array elements");do t=n.charAt(e++);while(t<=" "&&(t===" "||t===`
`||t==="\r"||t==="	"))}a("Array ends with '[' or ','")}function O(){let r={};do t=n.charAt(e++);while(t<=" "&&(t===" "||t===`
`||t==="\r"||t==="	"));if(t==="}")return t=n.charAt(e++),r;for(;t;){let c=j();for(;t<=" "&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);for(t!==":"&&a("Expected ':', got '"+t+"' between object key and value"),t=n.charAt(e++),r[c]=x();t<=" "&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);if(t==="}")return t=n.charAt(e++),r;t!==","&&a("Expected ',', got '"+t+"' between items in object");do t=n.charAt(e++);while(t<=" "&&(t===" "||t===`
`||t==="\r"||t==="	"))}a("Object ends with '{' or ','")}function x(){for(;t<=" "&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);switch(t){case'"':return j();case"{":return O();case"[":return v();default:return m()}}function B(r,c,i,s){typeof r!="string"&&a("JSON source is not a string"),e=0,t=" ",n=r,A=s,p=i;let o=x();for(;t<=" "&&(t===" "||t===`
`||t==="\r"||t==="	");)t=n.charAt(e++);return t&&a("Additional data at end"),typeof c=="function"?function f(h,u){let l=h[u];if(l&&typeof l=="object"){for(let d in l)if(Object.prototype.hasOwnProperty.call(l,d)){let b=f(l,d);b!==void 0?l[d]=b:delete l[d]}}return c.call(h,u,l)}({"":o},""):o}export{g as JSONParseError,B as default};
